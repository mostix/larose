function arrayUnique(i){return i.reduce(function(i,t){return i.indexOf(t)<0&&i.push(t),i},[])}function function_exists(i){return"string"==typeof i&&(i=this.window[i]),"function"==typeof i}function oosHookJsCode(){for(var i=0;i<oosHookJsCodeFunctions.length;i++)function_exists(oosHookJsCodeFunctions[i])&&setTimeout(oosHookJsCodeFunctions[i]+"()",0)}function addCombination(i,t,e,a,n,o,c,r,s,l,u){globalQuantity+=e;var d=[];d.idCombination=i,d.quantity=e,d.idsAttributes=t,d.price=a,d.ecotax=n,d.image=o,d.reference=c,d.unit_price=r,d.minimal_quantity=s,d.available_date=[],d.available_date=l,d.specific_price=[],d.specific_price=u,combinations.push(d)}function findCombination(){$("#minimal_quantity_wanted_p").fadeOut(),("undefined"==typeof $("#minimal_quantity_label").text()||$("#minimal_quantity_label").html()>1)&&$("#quantity_wanted").val(1);var i=[],t=parseInt($("#attributes .checked > input[type=radio]").length);t=t?"#attributes .checked > input[type=radio]":"#attributes input[type=radio]:checked",$("#attributes select, #attributes input[type=hidden], "+t).each(function(){i.push(parseInt($(this).val()))}),"undefined"!=typeof combinations&&combinations||(combinations=[]);for(var e=0;e<combinations.length;++e){var a=!0;if($.each(combinations[e].idsAttributes,function(t,e){in_array(parseInt(e),i)||(a=!1)}),a)return combinations[e].minimal_quantity>1&&($("#minimal_quantity_label").html(combinations[e].minimal_quantity),$("#minimal_quantity_wanted_p").fadeIn(),$("#quantity_wanted").val(combinations[e].minimal_quantity),$("#quantity_wanted").bind("keyup",function(){checkMinimalQuantity(combinations[e].minimal_quantity)})),selectedCombination.unavailable=!1,selectedCombination.reference=combinations[e].reference,$("#idCombination").val(combinations[e].idCombination),quantityAvailable=combinations[e].quantity,selectedCombination.price=combinations[e].price,selectedCombination.unit_price=combinations[e].unit_price,selectedCombination.specific_price=combinations[e].specific_price,combinations[e].ecotax?selectedCombination.ecotax=combinations[e].ecotax:selectedCombination.ecotax=default_eco_tax,combinations[e].image&&-1!=combinations[e].image&&displayImage($("#thumb_"+combinations[e].image).parent()),combinations[e].idCombination&&combinations[e].idCombination>0&&displayDiscounts(combinations[e].idCombination),selectedCombination.available_date=combinations[e].available_date,updateDisplay(),void(firstTime?(refreshProductImages(0),firstTime=!1):refreshProductImages(combinations[e].idCombination))}selectedCombination.unavailable=!0,"undefined"!=typeof selectedCombination.available_date&&delete selectedCombination.available_date,updateDisplay()}function updateDisplay(){productPrice,productPriceWithoutReduction;if(!selectedCombination.unavailable&&quantityAvailable>0&&1==productAvailableForOrder)$("#quantity_wanted_p:hidden").show("slow"),$("#add_to_cart:hidden").fadeIn(600),$("#oosHook").hide(),$("#availability_date").fadeOut(),stock_management&&""!=availableNowValue?($("#availability_value").removeClass("label-warning").addClass("label-success").text(availableNowValue).show(),$("#availability_statut:hidden").show()):$("#availability_statut:visible").hide(),allowBuyWhenOutOfStock||(quantityAvailable<=maxQuantityToAllowDisplayOfLastQuantityMessage?$("#last_quantities").show("slow"):$("#last_quantities").hide("slow")),quantitiesDisplayAllowed&&($("#pQuantityAvailable:hidden").show("slow"),$("#quantityAvailable").text(quantityAvailable),quantityAvailable<2?($("#quantityAvailableTxt").show(),$("#quantityAvailableTxtMultiple").hide()):($("#quantityAvailableTxt").hide(),$("#quantityAvailableTxtMultiple").show()));else{if(1==productAvailableForOrder&&($("#oosHook").show(),$("#oosHook").length>0&&function_exists("oosHookJsCode")&&oosHookJsCode()),$("#last_quantities:visible").hide("slow"),$("#pQuantityAvailable:visible").hide("slow"),allowBuyWhenOutOfStock||$("#quantity_wanted_p:visible").hide("slow"),selectedCombination.unavailable?($("#availability_value").text(doesntExist).removeClass("label-success").addClass("label-warning"),$("#oosHook").hide()):($("#availability_value").text(doesntExistNoMore+(globalQuantity>0?" "+doesntExistNoMoreBut:"")),allowBuyWhenOutOfStock||$("#availability_value").removeClass("label-success").addClass("label-warning")),(1==stock_management&&!allowBuyWhenOutOfStock||!stock_management&&selectedCombination.unavailable)&&$("#availability_statut:hidden").show(),"undefined"!=typeof selectedCombination.available_date&&0!=selectedCombination.available_date.date.length){var i=selectedCombination.available_date.date,t=i.split("-"),e=new Date(t[0],t[1],t[2]);e.setMonth(e.getMonth()-1);var a=new Date;a.getTime()<e.getTime()&&$("#availability_date_value").text()!=selectedCombination.available_date.date_formatted?$("#availability_date").fadeOut("normal",function(){$("#availability_date_value").text(selectedCombination.available_date.date_formatted),$(this).fadeIn()}):a.getTime()<e.getTime()&&$("#availability_date").fadeIn()}else $("#availability_date").fadeOut();allowBuyWhenOutOfStock&&!selectedCombination.unavailable&&productAvailableForOrder?($("#add_to_cart:hidden").fadeIn(600),stock_management&&""!=availableLaterValue?$("#availability_value").addClass("label-warning").text(availableLaterValue).show("slow"):$("#availability_statut:visible").hide("slow")):($("#add_to_cart:visible").fadeOut(600),1==stock_management&&productAvailableForOrder&&$("#availability_statut:hidden").show("slow")),0==productAvailableForOrder&&$("#availability_statut:visible").hide()}selectedCombination.reference||productReference?(selectedCombination.reference?$("#product_reference span").text(selectedCombination.reference):productReference&&$("#product_reference span").text(productReference),$("#product_reference:hidden").show("slow")):$("#product_reference:visible").hide("slow"),productHasAttributes&&updatePrice()}function updatePrice(){var i=$("#idCombination").val(),t=combinationsFromController[i];if("undefined"!=typeof t){var e=productBasePriceTaxExcl,a=0;e+=+t.price,t.specific_price&&t.specific_price.price>0&&(e=0===t.specific_price.id_product_attribute?+t.specific_price.price:+t.specific_price.price+ +t.price),a=e*(1-group_reduction);var n=a;if(t.specific_price&&t.specific_price.reduction>0)if("amount"==t.specific_price.reduction_type){if("undefined"!=typeof t.specific_price.reduction_tax&&"0"===t.specific_price.reduction_tax){var o=+t.specific_price.reduction/currencyRate;n-=o}}else"percentage"==t.specific_price.reduction_type&&(n*=1-+t.specific_price.reduction);if(noTaxForThisProduct||customerGroupWithoutTax?(basePriceDisplay=e,priceWithDiscountsDisplay=n):(basePriceDisplay=e*(taxRate/100+1),priceWithDiscountsDisplay=n*(taxRate/100+1)),default_eco_tax&&(basePriceDisplay+=default_eco_tax*(1+ecotaxTax_rate/100),priceWithDiscountsDisplay+=default_eco_tax*(1+ecotaxTax_rate/100)),t.specific_price&&t.specific_price.reduction>0&&"amount"==t.specific_price.reduction_type&&("undefined"==typeof t.specific_price.reduction_tax||"undefined"!=typeof t.specific_price.reduction_tax&&"1"===t.specific_price.reduction_tax)){var o=+t.specific_price.reduction/currencyRate;priceWithDiscountsDisplay-=o,n=priceWithDiscountsDisplay-o*(1/(1+taxRate/100))}if(basePriceDisplay!=priceWithDiscountsDisplay)var c=basePriceDisplay-priceWithDiscountsDisplay,r=100*(1-priceWithDiscountsDisplay/basePriceDisplay);var s=+t.unit_impact;(productUnitPriceRatio>0||s)&&(s?(baseUnitPrice=productBasePriceTaxExcl/productUnitPriceRatio,unit_price=baseUnitPrice+s,noTaxForThisProduct&&customerGroupWithoutTax||(unit_price*=taxRate/100+1)):unit_price=priceWithDiscountsDisplay/productUnitPriceRatio),$("#reduction_percent").hide(),$("#reduction_amount").hide(),$("#old_price,#old_price_display,#old_price_display_taxes").hide(),$(".price-ecotax").hide(),$(".unit-price").hide(),$("#our_price_display").text(formatCurrency(priceWithDiscountsDisplay*currencyRate,currencyFormat,currencySign,currencyBlank)).trigger("change"),priceWithDiscountsDisplay.toFixed(2)!=basePriceDisplay.toFixed(2)&&($("#old_price_display").text(formatCurrency(basePriceDisplay*currencyRate,currencyFormat,currencySign,currencyBlank)),$("#old_price,#old_price_display,#old_price_display_taxes").show(),n!=a&&("amount"==t.specific_price.reduction_type?($("#reduction_amount_display").html("-"+formatCurrency(+c*currencyRate,currencyFormat,currencySign,currencyBlank)),$("#reduction_amount").show()):($("#reduction_percent_display").html("-"+parseFloat(r).toFixed(0)+"%"),$("#reduction_percent").show()))),default_eco_tax&&(ecotax=default_eco_tax,t.ecotax&&(ecotax=+t.ecotax),noTaxForThisProduct||(ecotax*=1+ecotaxTax_rate/100),$("#ecotax_price_display").text(formatCurrency(ecotax*currencyRate,currencyFormat,currencySign,currencyBlank)),$(".price-ecotax").show()),productUnitPriceRatio>0&&($("#unit_price_display").text(formatCurrency(unit_price*currencyRate,currencyFormat,currencySign,currencyBlank)),$(".unit-price").show()),updateDiscountTable(priceWithDiscountsDisplay)}}function displayImage(i,t){if("undefined"==typeof t&&(t=!1),i.attr("href")){var e=i.attr("href").replace("thickbox","large"),a=i.attr("title"),n=i.attr("href");$("#bigpic").attr("src")!=e&&$("#bigpic").attr({src:e,alt:a,title:a}).load(function(){"undefined"!=typeof jqZoomEnabled&&jqZoomEnabled&&$(this).attr("rel",n)}),$("#views_block li a").removeClass("shown"),$(i).addClass("shown")}}function displayDiscounts(i){$("#quantityDiscount tbody tr").each(function(){"quantityDiscount_0"!=$(this).attr("id")&&$(this).attr("id")!="quantityDiscount_"+i&&"noQuantityDiscount"!=$(this).attr("id")&&$(this).fadeOut("slow")}),0!=$("#quantityDiscount_"+i+",.quantityDiscount_"+i).length||0!=$("#quantityDiscount_0,.quantityDiscount_0").length?($("#quantityDiscount").parent().show(),$("#quantityDiscount_"+i+",.quantityDiscount_"+i).show(),$("#noQuantityDiscount").hide()):($("#quantityDiscount").parent().hide(),$("#noQuantityDiscount").show())}function updateDiscountTable(i){$("#quantityDiscount tbody tr").each(function(){var t=$(this).data("discount-type"),e=$(this).data("discount"),a=$(this).data("discount-quantity");if("percentage"==t)var n=i*(1-e/100),o=i*(e/100)*a;else if("amount"==t)var n=i-e,o=e*a;0!=displayDiscountPrice&&$(this).children("td").eq(1).text(formatCurrency(n*currencyRate,currencyFormat,currencySign,currencyBlank)),$(this).children("td").eq(2).text(upToTxt+" "+formatCurrency(o*currencyRate,currencyFormat,currencySign,currencyBlank))})}function serialScrollFixLock(i,t,e,a,n){var o=$("#thumbs_list li:visible").length,c=0==n?!0:!1,r=n+serialScrollNbImagesDisplayed>=o?!0:!1;return $("#view_scroll_left").css("cursor",c?"default":"pointer").css("display",c?"none":"block").fadeTo(0,c?0:1),$("#view_scroll_right").css("cursor",r?"default":"pointer").fadeTo(0,r?0:1).css("display",r?"none":"block"),!0}function serialScrollSetNbImages(){serialScrollNbImagesDisplayed=4,$("#thumbs_list").outerWidth(!0)<294?serialScrollNbImagesDisplayed=2:$("#thumbs_list").outerWidth(!0)<392&&(serialScrollNbImagesDisplayed=3)}function refreshProductImages(i){if(i=parseInt(i),i>0&&"undefined"!=typeof combinationImages&&"undefined"!=typeof combinationImages[i]){$("#thumbs_list li").hide();for(var t=0;t<combinationImages[i].length;t++)"undefined"!=typeof jqZoomEnabled&&jqZoomEnabled?$("#thumbnail_"+parseInt(combinationImages[i][t])).show().children("a.shown").trigger("click"):$("#thumbnail_"+parseInt(combinationImages[i][t])).show()}else $("#thumbs_list li").show();parseInt($("#thumbs_list_frame >li:visible").length)!=parseInt($("#thumbs_list_frame >li").length)?$("#wrapResetImages").stop(!0,!0).show():$("#wrapResetImages").stop(!0,!0).hide(),$("#thumbs_list_frame").width(parseInt($("#thumbs_list_frame >li").outerWidth(!0)*$("#thumbs_list_frame >li").length)+"px"),$("#thumbs_list").trigger("goto",0),serialScrollFixLock("","","","",0)}function saveCustomization(){$("#quantityBackup").val($("#quantity_wanted").val()),$("#customizationForm").submit()}function submitPublishProduct(i,t,e){var a=$("#admin-action-product-id").val();return $.ajaxSetup({async:!1}),$.post(i+"/index.php",{action:"publishProduct",id_product:a,status:1,redirect:t,ajax:1,tab:"AdminProducts",token:e},function(i){-1===i.indexOf("error")&&(document.location.href=i)}),!0}function checkMinimalQuantity(i){$("#quantity_wanted").val()<i?($("#quantity_wanted").css("border","1px solid red"),$("#minimal_quantity_wanted_p").css("color","red")):($("#quantity_wanted").css("border","1px solid #BDC2C9"),$("#minimal_quantity_wanted_p").css("color","#374853"))}function colorPickerClick(i){id_attribute=$(i).attr("id").replace("color_",""),$(i).parent().parent().children().removeClass("selected"),$(i).fadeTo("fast",1,function(){$(this).fadeTo("fast",0,function(){$(this).fadeTo("fast",1,function(){$(this).parent().addClass("selected")})})}),$(i).parent().parent().parent().children(".color_pick_hidden").val(id_attribute),findCombination()}function getProductAttribute(){request="";var i=[],t=parseInt($("#attributes .checked > input[type=radio]").length);t=t?"#attributes .checked > input[type=radio]":"#attributes input[type=radio]:checked",$("#attributes select, #attributes input[type=hidden], "+t).each(function(){i.push($(this).val())});for(var e in attributesCombinations)for(var a in i)attributesCombinations[e].id_attribute===i[a]&&(request+="/"+attributesCombinations[e].id_attribute+"-"+attributesCombinations[e].group+attribute_anchor_separator+attributesCombinations[e].attribute);request=request.replace(request.substring(0,1),"#/");var n=window.location+"";-1!=n.indexOf("#")&&(n=n.substring(0,n.indexOf("#"))),$("#customizationForm").length&&(customAction=$("#customizationForm").attr("action"),-1!=customAction.indexOf("#")&&(customAction=customAction.substring(0,customAction.indexOf("#"))),$("#customizationForm").attr("action",customAction+request)),window.location=n+request}function initLocationChange(i){i||(i=500),setInterval(checkUrl,i)}function checkUrl(){if(original_url!=window.location||first_url_check){first_url_check=!1;var i=window.location+"";if(-1!=i.indexOf("#/")){params=i.substring(i.indexOf("#")+1,i.length),tabParams=params.split("/"),tabValues=[],""==tabParams[0]&&tabParams.shift();for(var t in tabParams)tabValues.push(tabParams[t].split(attribute_anchor_separator));$(".color_pick").removeClass("selected").parent().parent().children().removeClass("selected"),count=0;for(var e in tabValues)for(var a in attributesCombinations)attributesCombinations[a].group===decodeURIComponent(tabValues[e][1])&&attributesCombinations[a].id_attribute===decodeURIComponent(tabValues[e][0])&&(count++,$("#color_"+attributesCombinations[a].id_attribute).addClass("selected").parent().addClass("selected"),$("input:radio[value="+attributesCombinations[a].id_attribute+"]").attr("checked",!0),$("input[type=hidden][name=group_"+attributesCombinations[a].id_attribute_group+"]").val(attributesCombinations[a].id_attribute),$("select[name=group_"+attributesCombinations[a].id_attribute_group+"]").val(attributesCombinations[a].id_attribute));if(count>=0)return firstTime=!1,findCombination(),original_url=i,!0;window.location=i.substring(0,i.indexOf("#"))}}return!1}var serialScrollNbImagesDisplayed,selectedCombination=[],globalQuantity=0,colors=[],original_url=window.location+"",first_url_check=!0,firstTime=!0;if("undefined"!=typeof customizationFields&&customizationFields){var customizationFieldsBk=customizationFields;customizationFields=[];for(var j=0,i=0;i<customizationFieldsBk.length;++i){var key="pictures_"+parseInt(id_product)+"_"+parseInt(customizationFieldsBk[i].id_customization_field);customizationFields[i]=[],customizationFields[i][0]=0==parseInt(customizationFieldsBk[i].type)?"img"+i:"textField"+j++,customizationFields[i][1]=0==parseInt(customizationFieldsBk[i].type)&&customizationFieldsBk[i][key]?2:parseInt(customizationFieldsBk[i].required)}}if("undefined"!=typeof combinationImages&&combinationImages){combinationImagesJS=[],combinationImagesJS[0]=[];var k=0;for(var i in combinationImages){combinationImagesJS[i]=[];for(var j in combinationImages[i]){var id_image=parseInt(combinationImages[i][j].id_image);id_image&&(combinationImagesJS[0][k++]=id_image,combinationImagesJS[i][j]=[],combinationImagesJS[i][j]=id_image)}}if("undefined"!=typeof combinationImagesJS[0]&&combinationImagesJS[0]){var array_values=[];for(var key in arrayUnique(combinationImagesJS[0]))array_values.push(combinationImagesJS[0][key]);combinationImagesJS[0]=array_values}combinationImages=combinationImagesJS}if("undefined"!=typeof combinations&&combinations){combinationsJS=[];var k=0;for(var i in combinations)globalQuantity+=combinations[i].quantity,combinationsJS[k]=[],combinationsJS[k].idCombination=parseInt(i),combinationsJS[k].idsAttributes=combinations[i].attributes,combinationsJS[k].quantity=combinations[i].quantity,combinationsJS[k].price=combinations[i].price,combinationsJS[k].ecotax=combinations[i].ecotax,combinationsJS[k].image=parseInt(combinations[i].id_image),combinationsJS[k].reference=combinations[i].reference,combinationsJS[k].unit_price=combinations[i].unit_impact,combinationsJS[k].minimal_quantity=parseInt(combinations[i].minimal_quantity),combinationsJS[k].available_date=[],combinationsJS[k].available_date.date=combinations[i].available_date,combinationsJS[k].available_date.date_formatted=combinations[i].date_formatted,combinationsJS[k].specific_price=[],combinationsJS[k].specific_price.reduction_percent=combinations[i].specific_price&&combinations[i].specific_price.reduction&&"percentage"==combinations[i].specific_price.reduction_type?100*combinations[i].specific_price.reduction:0,combinationsJS[k].specific_price.reduction_price=combinations[i].specific_price&&combinations[i].specific_price.reduction&&"amount"==combinations[i].specific_price.reduction_type?combinations[i].specific_price.reduction:0,combinationsJS[k].price=combinations[i].specific_price&&combinations[i].specific_price.price&&-1!=parseInt(combinations[i].specific_price.price)?combinations[i].specific_price.price:combinations[i].price,combinationsJS[k].reduction_type=combinations[i].specific_price&&combinations[i].specific_price.reduction_type?combinations[i].specific_price.reduction_type:"",combinationsJS[k].id_product_attribute=combinations[i].specific_price&&combinations[i].specific_price.id_product_attribute?combinations[i].specific_price.id_product_attribute:0,k++;combinations=combinationsJS}$(document).ready(function(){var i=checkUrl();if(i||("undefined"!=typeof productHasAttributes&&productHasAttributes?findCombination():refreshProductImages(0)),initLocationChange(),serialScrollSetNbImages(),$.prototype.serialScroll&&$("#thumbs_list").serialScroll({items:"li:visible",prev:"#view_scroll_left",next:"#view_scroll_right",axis:"x",offset:0,start:0,stop:!0,onBefore:serialScrollFixLock,duration:700,step:2,lazy:!0,lock:!1,force:!1,cycle:!1}),$("#thumbs_list").trigger("goto",0),"undefined"!=typeof jqZoomEnabled&&jqZoomEnabled){if($("#thumbs_list .shown img").length){var t=$("#thumbs_list .shown img").attr("src").replace("cart_","large_");$(".jqzoom img").attr("src")!=t&&$(".jqzoom img").attr("src",t).parent().attr("href",t)}$(".jqzoom").jqzoom({zoomType:"innerzoom",zoomWidth:458,zoomHeight:458,xOffset:21,yOffset:0,title:!1})}if("undefined"==typeof contentOnly||contentOnly?"undefined"==typeof ajax_allowed||ajax_allowed||$("#buy_block").attr("target","_top"):$.prototype.fancybox&&$("li:visible .fancybox, .fancybox.shown").fancybox({hideOnContentClick:!0,openEffect:"elastic",closeEffect:"elastic"}),$("#bxslider li").length&&$.prototype.bxSlider&&$("#bxslider").bxSlider({minSlides:1,maxSlides:6,slideWidth:178,slideMargin:20,pager:!1,nextText:"",prevText:"",moveSlides:1,infiniteLoop:!1,hideControlOnEnd:!0}),"undefined"!=typeof product_fileDefaultHtml&&($.uniform.defaults.fileDefaultHtml=product_fileDefaultHtml),"undefined"!=typeof product_fileButtonHtml&&($.uniform.defaults.fileButtonHtml=product_fileButtonHtml),$("#customizationForm").length){var e=window.location+"";-1!=e.indexOf("#")&&getProductAttribute()}}),$(window).resize(function(){serialScrollSetNbImages(),$("#thumbs_list").trigger("goto",0),serialScrollFixLock("","","","",0)}),$(document).on("mouseover","#views_block li a",function(){displayImage($(this))}),$(document).on("click","#view_full_size, #image-block",function(i){$("#views_block .shown").click()}),$(document).on("click","#short_description_block .button",function(i){$("#more_info_tab_more_info").click(),$.scrollTo("#more_info_tabs",1200)}),$(document).on("click","#customizedDatas input",function(i){$("#customizedDatas input").hide(),$("#ajax-loader").fadeIn(),$("#customizedDatas").append(uploading_in_progress)}),$(document).on("click","a[data-id=resetImages]",function(i){i.preventDefault(),refreshProductImages(0)}),$(document).on("click",".color_pick",function(i){i.preventDefault(),colorPickerClick($(this)),getProductAttribute()}),$(document).on("change",".attribute_select",function(i){i.preventDefault(),findCombination(),getProductAttribute()}),$(document).on("click",".attribute_radio",function(i){i.preventDefault(),findCombination(),getProductAttribute()}),$(document).on("click","button[name=saveCustomization]",function(i){saveCustomization()}),"undefined"!=typeof ad&&ad&&"undefined"!=typeof adtoken&&adtoken&&($(document).on("click","input[name=publish_button]",function(i){i.preventDefault(),submitPublishProduct(ad,0,adtoken)}),$(document).on("click","input[name=lnk_view]",function(i){i.preventDefault(),submitPublishProduct(ad,1,adtoken)})),"undefined"!=typeof contentOnly&&contentOnly&&($(document).on("click",".fancybox",function(i){i.preventDefault()}),$(document).on("click","#image-block",function(i){i.preventDefault();var t=window.document.location.href+"",e=t.replace(/[\?|&]content_only=1/,"");"search"==window.parent.page_name&&(e+=(e.indexOf("?")<0?"?":"&")+"HTTP_REFERER="+encodeURIComponent(window.parent.document.location.href)),window.parent.document.location.href=e})),$(document).on("click",".product_quantity_up",function(i){i.preventDefault(),fieldName=$(this).data("field-qty");var t=parseInt($("input[name="+fieldName+"]").val());!allowBuyWhenOutOfStock&&quantityAvailable>0?quantityAvailableT=quantityAvailable:quantityAvailableT=1e8,!isNaN(t)&&t<quantityAvailableT?$("input[name="+fieldName+"]").val(t+1).trigger("keyup"):$("input[name="+fieldName+"]").val(quantityAvailableT)}),$(document).on("click",".product_quantity_down",function(i){i.preventDefault(),fieldName=$(this).data("field-qty");var t=parseInt($("input[name="+fieldName+"]").val());!isNaN(t)&&t>1?$("input[name="+fieldName+"]").val(t-1).trigger("keyup"):$("input[name="+fieldName+"]").val(1)}),"undefined"!=typeof minimalQuantity&&minimalQuantity&&(checkMinimalQuantity(),$(document).on("keyup","input[name=qty]",function(i){checkMinimalQuantity(minimalQuantity)}));